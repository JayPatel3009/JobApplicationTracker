<div class="bg-body-secondary text-center py-5 rounded-2">
    <h1 class="display-6 fw-bold">
        Job Applications
    </h1>

    <!-- Create New Button -->
    <button class="btn btn-primary mt-3" (click)="openCreateDialog()">Create New</button>
</div>

<div class="row mt-5">
    <div class="col-12">
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-start mb-2 border px-4 py-3 rounded-3" *ngFor="let jobApplication of jobApplicationService.jobApplications">
                <div class="flex-grow-1 mouse-hover">
                    <div class="fw-bold"> {{ jobApplication.companyName }} </div>
                    <div> {{ jobApplication.position }} </div>
                    <div> {{ jobApplication.status }} </div>
                    <div> {{ jobApplication.dateApplied | dateFormat }} </div>
                </div>

                <!-- Action Button with Dropdown -->
                <div class="position-relative">
                    <!-- Main Action Button -->
                    <button class="btn btn-link p-0" (click)="toggleActions(jobApplication.id)">
                        <i class="fa-solid fa-sliders fa-lg"></i>
                    </button>
        
                    <!-- Dropdown Options -->
                    <div
                        class="action-menu position-absolute bg-white border rounded shadow p-2"
                        *ngIf="activeActionId === jobApplication.id"
                    >
                    <button
                        type="button"
                        class="btn btn-sm btn-light d-flex align-items-center mb-1"
                        (click)="openEditDialog(jobApplication); closeActions()"
                    >
                        <i class="fa-solid fa-pen me-1"></i> Edit
                    </button>
                    <button
                        type="button"
                        class="btn btn-sm btn-light d-flex align-items-center"
                        (click)="onDelete(jobApplication.id); closeActions()"
                    >
                        <i class="fa-solid fa-trash me-1"></i> Delete
                    </button>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>

<!-- Pagination Controls -->
<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="jobApplicationService.currentPage === 1">
        <a class="page-link" (click)="changePage(jobApplicationService.currentPage - 1)">Previous</a>
      </li>
      <li class="page-item" *ngFor="let page of pages" [class.active]="page === jobApplicationService.currentPage">
        <a class="page-link" (click)="changePage(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="jobApplicationService.currentPage === totalPages">
        <a class="page-link" (click)="changePage(jobApplicationService.currentPage + 1)">Next</a>
      </li>
    </ul>
</nav>
